{
  "openapi":"3.0.0",
  "info":{
    "description":"A service that orchestrates the Sauce cloud as well as test runner packages.",
    "version":"0.1.7",
    "title":"Testrunner Orchestrator",
    "termsOfService":"https://saucelabs.com/terms-of-service",
    "contact":{
      "name":"Open Source Program Office at Sauce",
      "email":"opensource@saucelabs.com",
      "url":"https://saucelabs.com"
    }
  },
  "externalDocs":{
    "description":"Sauce Labs Wiki",
    "url":"https://wiki.saucelabs.com"
  },
  "basePath": "/orchestrator",
  "servers":[
    {
      "url":"https://api.{region}.saucelabs.{tld}",
      "variables":{
        "region":{
          "default":"us-west-1",
          "description":"region of datacenter",
          "enum":[
            "us-west-1",
            "eu-central-1",
            "staging"
          ]
        },
        "tld":{
          "default":"com",
          "description":"internal or external API",
          "enum":[
            "net",
            "com"
          ]
        }
      }
    }
  ],
  "tags":[
    {
      "name":"Log Files",
      "description":"Log files that were captured while the test was running."
    }
  ],
  "components":{
    "securitySchemes":{
      "bearerAuth":{
        "type":"http",
        "scheme":"bearer",
        "bearerFormat":"JWT"
      },
      "basicAuth":{
        "type":"http",
        "scheme":"basic"
      }
    }
  },
  "paths":{
    "/v1/job":{
      "post":{
        "operationId":"createJob",
        "summary":"Creates Job Shell",
        "externalDocs":{
          "description":"TBD",
          "url":"https://wiki.saucelabs.com"
        },
        "tags":[
          "Job"
        ],
        "requestBody":{
          "required":true,
          "description":"Metadata to describe job",
          "content":{
            "application/json":{
              "schema":{
                "type":"object",
                "description":"A job shell",
                "properties":{
                  "capabilities":{
                    "type":"object",
                    "description":"Shell job capabilities",
                    "properties":{
                      "browserName":{
                        "type":"string",
                        "description":"Identifies the user agent.",
                        "example":"Chrome"
                      },
                      "browserVersion":{
                        "type":"string",
                        "description":"Identifies the version of the user agent.",
                        "example":80
                      },
                      "platformName":{
                        "type":"string",
                        "description":"Identifies the operating system of the endpoint node.",
                        "example":"Windows 10"
                      }
                    }
                  },
                  "build":{
                    "type":"string",
                    "description":"identifier for the build to attach to job to",
                    "example":"my build"
                  },
                  "name":{
                    "type":"string",
                    "description":"name of the test on Sauce Labs",
                    "example":"test feature xyz"
                  },
                  "isPublic":{
                    "type":"boolean",
                    "description":"whether or not the job is visible to not logged in user",
                    "example":false
                  }
                }
              }
            }
          }
        },
        "responses":{
          "200":{
            "description":"Object containing sessionId and capabilities of created WebDriver session.",
            "content":{
              "application/json":{
                "schema":{
                  "description":"Response for creating a job shell",
                  "type":"object",
                  "properties":{
                    "id":{
                      "type":"string",
                      "description":"created job id",
                      "example":"1dddf75a8cd8412da962898fb431b091"
                    }
                  }
                }
              }
            }
          },
          "400":{
            "description":"Returned if shell job could not be created due to internal issues",
            "content":{
              "application/json":{
                "schema":{
                  "description":"Failure Response",
                  "type":"object",
                  "properties":{
                    "error":{
                      "type":"string",
                      "example":"Couldn't create job"
                    },
                    "message":{
                      "type":"string",
                      "description":"Specific error message",
                      "example":"System is currently down and can't create jobs"
                    }
                  }
                }
              }
            }
          }
        },
        "description":"TBD"
      }
    },
    "/v1/job/{jobId}/upload":{
      "put":{
        "operationId":"uploadJobAssets",
        "summary":"Upload job assets",
        "externalDocs":{
          "description":"TBD",
          "url":"https://wiki.saucelabs.com"
        },
        "tags":[
          "Job"
        ],
        "parameters":[
          {
            "in":"path",
            "name":"jobId",
            "required":true,
            "description":"id of the job that was run on Sauce Labs",
            "schema":{
              "type":"string"
            }
          }
        ],
        "requestBody":{
          "content":{
            "multipart/form-data":{
              "schema":{
                "type":"object",
                "properties":{
                  "file":{
                    "type":"array",
                    "items":{
                      "type":"string",
                      "format":"binary"
                    }
                  }
                }
              }
            }
          }
        },
        "responses":{
          "200":{
            "description":"Object containing sessionId and capabilities of created WebDriver session.",
            "content":{
              "application/json":{
                "schema":{
                  "description":"Response for creating a job shell",
                  "type":"array",
                  "items":{
                    "type":"string",
                    "description":"uploaded file name"
                  },
                  "example":[
                    "log.json",
                    "video.mp4"
                  ]
                }
              }
            }
          }
        },
        "description":"TBD"
      }
    }
  },
  "security":[
    {
      "basicAuth":[

      ]
    },
    {
      "bearerAuth":[

      ]
    }
  ]
}
